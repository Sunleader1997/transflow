"use strict";(globalThis["webpackChunktransflow_ui"]=globalThis["webpackChunktransflow_ui"]||[]).push([[787],{6787:(e,l,o)=>{o.r(l),o.d(l,{default:()=>P});var a=o(8124),t=o(3829);function n(e,l,o,n,i,d){const s=(0,a.g2)("q-avatar"),b=(0,a.g2)("q-item-section"),u=(0,a.g2)("q-item-label"),r=(0,a.g2)("q-btn"),c=(0,a.g2)("q-btn-group"),F=(0,a.g2)("q-item"),m=(0,a.g2)("q-list"),p=(0,a.g2)("q-scroll-area"),f=(0,a.g2)("q-drawer"),g=(0,a.g2)("router-view"),k=(0,a.g2)("q-page-container"),h=(0,a.g2)("q-layout"),J=(0,a.g2)("q-card-section"),w=(0,a.g2)("q-input"),_=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),A=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(h,{view:"hHh lpR fFf"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{"show-if-above":"",side:"left",bordered:"",modelValue:n.jobEditFlag,"onUpdate:modelValue":l[0]||(l[0]=e=>n.jobEditFlag=e),mini:n.miniState,onMouseenter:l[1]||(l[1]=e=>n.miniState=!1),onMouseleave:l[2]||(l[2]=e=>n.miniState=!0),width:200,breakpoint:500},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"fit"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{padding:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.jobs,(l=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(F,{clickable:"",onClick:o=>e.$router.push({name:"jobPanel",params:{jobId:l.id}}),key:l.id},{default:(0,a.k6)((()=>[(0,a.bF)(b,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{color:"red","text-color":"white"},{default:(0,a.k6)((()=>[(0,a.eW)((0,t.v_)(l.name),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,t.v_)(l.description),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(b,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{outline:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{dense:"",flat:"",icon:"edit",onClick:e=>d.openEditor(l)},null,8,["onClick"]),(0,a.bF)(r,{dense:"",flat:"",icon:"delete",onClick:e=>d.removeJob(l.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[A]]))),128)),(0,a.bF)(r,{flat:"",dense:"",color:"brown",icon:"add",onClick:d.openNewJobPanel,class:"full-width"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","mini"]),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(g)])),_:1})])),_:1}),(0,a.bF)(v,{modelValue:n.newJobPanelFlag,"onUpdate:modelValue":l[5]||(l[5]=e=>n.newJobPanelFlag=e)},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(J,null,{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text-h6"},"新增任务",-1)]))),_:1}),(0,a.bF)(J,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{dense:"",modelValue:n.newJob.name,"onUpdate:modelValue":l[3]||(l[3]=e=>n.newJob.name=e),label:"名称",autofocus:""},null,8,["modelValue"]),(0,a.bF)(w,{dense:"",modelValue:n.newJob.description,"onUpdate:modelValue":l[4]||(l[4]=e=>n.newJob.description=e),label:"描述",autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",label:"确认",onClick:d.createJob},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(v,{modelValue:n.editJobPanelFlag,"onUpdate:modelValue":l[8]||(l[8]=e=>n.editJobPanelFlag=e)},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(J,null,{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.Lk)("div",{class:"text-h6"},"修改任务",-1)]))),_:1}),(0,a.bF)(J,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{dense:"",modelValue:n.editJob.name,"onUpdate:modelValue":l[6]||(l[6]=e=>n.editJob.name=e),label:"名称",autofocus:""},null,8,["modelValue"]),(0,a.bF)(w,{dense:"",modelValue:n.editJob.description,"onUpdate:modelValue":l[7]||(l[7]=e=>n.editJob.description=e),label:"描述",autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",label:"确认",onClick:d.saveJob},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var i=o(4599);const d={components:{},setup(){const e=(0,i.KR)([]),l=(0,i.KR)(!1),o=(0,i.KR)(!1),a=(0,i.KR)(!0),t=(0,i.KR)(!1),n=(0,i.KR)({name:"",description:""}),d=(0,i.KR)({id:"",name:"",description:""});return{jobs:e,newJobPanelFlag:l,newJob:n,editJob:d,jobEditFlag:t,editJobPanelFlag:o,miniState:a}},methods:{queryForJobs(){this.$axios.get("/transflow/job/list").then((e=>{console.log(e.data),this.jobs=e.data}))},openNewJobPanel(){this.newJobPanelFlag=!0},createJob(){this.$axios.post("/transflow/job/save",this.newJob).then((()=>{this.queryForJobs(),this.newJobPanelFlag=!1}))},saveJob(){this.$axios.post("/transflow/job/save",this.editJob).then((()=>{this.editJobPanelFlag=!1,this.queryForJobs()}))},removeJob(e){this.$axios.post("/transflow/job/delete",{id:e}).then((()=>{this.queryForJobs()}))},openEditor(e){this.editJobPanelFlag=!0,this.editJob={...e}}},beforeMount(){this.queryForJobs()}};var s=o(3789),b=o(2859),u=o(1355),r=o(2477),c=o(1860),F=o(6351),m=o(9500),p=o(8683),f=o(5353),g=o(5618),k=o(1763),h=o(4588),J=o(975),w=o(5375),_=o(2860),q=o(7195),v=o(9536),A=o(5496),V=o(8740),C=o.n(V);const Q=(0,s.A)(d,[["render",n]]),P=Q;C()(d,"components",{QLayout:b.A,QDrawer:u.A,QScrollArea:r.A,QList:c.A,QItem:F.A,QItemSection:m.A,QAvatar:p.A,QItemLabel:f.A,QBtnGroup:g.A,QBtn:k.A,QPageContainer:h.A,QDialog:J.A,QCard:w.A,QCardSection:_.A,QInput:q.A,QCardActions:v.A}),C()(d,"directives",{Ripple:A.A})}}]);