"use strict";(globalThis["webpackChunktransflow_ui"]=globalThis["webpackChunktransflow_ui"]||[]).push([[848],{7848:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Qe});var l=a(8124),o=a(3829);const n={key:0};function d(e,t,a,d,s,u){const i=(0,l.g2)("SideBar"),r=(0,l.g2)("q-scroll-area"),p=(0,l.g2)("q-drawer"),c=(0,l.g2)("MiniMap"),g=(0,l.g2)("q-btn"),b=(0,l.g2)("q-btn-group"),v=(0,l.g2)("Panel"),k=(0,l.g2)("DropzoneBackground"),m=(0,l.g2)("DefInput"),f=(0,l.g2)("DefFilter"),y=(0,l.g2)("DefOutput"),F=(0,l.g2)("SpecialEdge"),h=(0,l.g2)("VueFlow"),_=(0,l.g2)("q-page"),V=(0,l.g2)("q-page-container"),R=(0,l.g2)("q-layout");return(0,l.uX)(),(0,l.Wv)(R,{view:"hHh Lpr lff",container:"",style:{"min-height":"calc(96vh)"},onDrop:t[0]||(t[0]=e=>d.onDrop(e,a.jobId))},{default:(0,l.k6)((()=>[(0,l.bF)(p,{"show-if-above":"",side:"right",width:200},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"fit"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1})])),_:1}),(0,l.bF)(V,null,{default:(0,l.k6)((()=>[(0,l.bF)(_,{style:{height:"calc(100vh - 50px)"}},{default:(0,l.k6)((()=>[(0,l.bF)(h,{onDragover:d.onDragOver,onDragleave:d.onDragLeave,class:"full-height"},{"node-input":(0,l.k6)((e=>[(0,l.bF)(m,(0,o._B)((0,l.Ng)(e)),null,16)])),"node-filter":(0,l.k6)((e=>[(0,l.bF)(f,(0,o._B)((0,l.Ng)(e)),null,16)])),"node-output":(0,l.k6)((e=>[(0,l.bF)(y,(0,l.v6)(e,{onUpdateNodeInternals:()=>{}}),null,16)])),"edge-special":(0,l.k6)((e=>[(0,l.bF)(F,(0,o._B)((0,l.Ng)(e)),null,16)])),default:(0,l.k6)((()=>[(0,l.bF)(c),(0,l.bF)(v,{position:"top-center"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{outline:""},{default:(0,l.k6)((()=>[(0,l.bF)(g,{outline:"",color:"brown",label:"执行",onClick:u.runJob},null,8,["onClick"]),(0,l.bF)(g,{outline:"",color:"brown",label:"停止",onClick:u.stopJob},null,8,["onClick"]),(0,l.bF)(g,{outline:"",color:"brown",label:"构建测试",onClick:u.buildJob},null,8,["onClick"])])),_:1})])),_:1}),(0,l.bF)(k,{style:(0,o.Tr)({backgroundColor:d.isDragOver?"#e7f3ff":"transparent",transition:"background-color 0.2s ease"})},{default:(0,l.k6)((()=>[d.isDragOver?((0,l.uX)(),(0,l.CE)("p",n,"Drop here")):(0,l.Q3)("",!0)])),_:1},8,["style"])])),_:1},8,["onDragover","onDragleave"])])),_:1})])),_:1})])),_:1})}var s=a(1563),u=a(9575),i=a(4599),r=a(2608);let p=0;function c(){return"dndnode_"+p++}const g={pluginId:(0,i.KR)(null),draggedType:(0,i.KR)(null),isDragOver:(0,i.KR)(!1),isDragging:(0,i.KR)(!1),properties:(0,i.KR)(null)};function b(){const{pluginId:e,draggedType:t,isDragOver:a,isDragging:o,properties:n}=g,{addNodes:d,screenToFlowCoordinate:u,onNodesInitialized:i,updateNode:p}=(0,s.Id)();function b(a,l){a.dataTransfer&&(a.dataTransfer.setData("application/vueflow",l.type),a.dataTransfer.effectAllowed="move"),e.value=l.id,t.value=l.type,n.value=l.properties,o.value=!0,document.addEventListener("drop",m)}function v(e){e.preventDefault(),t.value&&(a.value=!0,e.dataTransfer&&(e.dataTransfer.dropEffect="move"))}function k(){a.value=!1}function m(){o.value=!1,a.value=!1,t.value=null,e.value=null,n.value=null,document.removeEventListener("drop",m)}function f(a,l){const o=u({x:a.clientX,y:a.clientY}),s=c(),g={type:t.value,position:o,properties:n,data:{name:"测试数据",jobId:l,pluginId:e.value,status:"INIT",nodeType:t.value.toUpperCase(),config:{}}},{off:b}=i((()=>{p(s,(e=>({position:{x:e.position.x-e.dimensions.width/2,y:e.position.y-e.dimensions.height/2}}))),b()}));r.A.post("/transflow/node/save",{...g}).then((e=>{d(e.data)}))}return(0,l.wB)(o,(e=>{document.body.style.userSelect=e?"none":""})),{draggedType:t,isDragOver:a,isDragging:o,onDragStart:b,onDragLeave:k,onDragOver:v,onDrop:f}}const v={inheritAttrs:!1},k=Object.assign(v,{__name:"SpecialEdge",props:{sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,a=(0,l.EW)((()=>(0,s.Fp)(t)));return(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)((0,i.R1)(s.tE),{path:a.value[0]},null,8,["path"]),(0,l.bF)((0,i.R1)(s.rV),null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",{style:(0,o.Tr)({pointerEvents:"all",position:"absolute",transform:`translate(-50%, -50%) translate(${a.value[1]}px,${a.value[2]}px)`}),class:"nodrag nopan"},null,4)])),_:1})],64))}}),m=k,f=m;function y(e,t,a,n,d,s){const u=(0,l.g2)("q-item-label"),i=(0,l.g2)("q-item-section"),r=(0,l.g2)("q-item"),p=(0,l.g2)("q-list");return(0,l.uX)(),(0,l.Wv)(p,{class:"nodes q-px-md"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.plugins,(e=>((0,l.uX)(),(0,l.Wv)(r,{dark:"",key:e.id,class:(0,o.C4)("q-my-md node-"+e.type),draggable:"STARTED"===e.state,onDragstart:t=>d.onDragStart(t,e)},{default:(0,l.k6)((()=>[(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.id),1)])),_:2},1024),(0,l.bF)(u,{caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.version),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","draggable","onDragstart"])))),128))])),_:1})}const F={components:{},data(){const{onDragStart:e}=b();return{onDragStart:e,plugins:[]}},methods:{queryForPlugins(){this.$axios.get("/transflow/plugins/list").then((e=>{this.plugins=e.data}))}},beforeMount(){this.queryForPlugins()}};var h=a(3789),_=a(1860),V=a(6351),R=a(9500),q=a(5353),A=a(8740),D=a.n(A);const I=(0,h.A)(F,[["render",y]]),w=I;D()(F,"components",{QList:_.A,QItem:V.A,QItemSection:R.A,QItemLabel:q.A});var x=a(4414);const Q={class:"dropzone-background"},N={class:"overlay"},X={__name:"DropzoneBackground",setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.bF)((0,i.R1)(x.V),{size:2,gap:20,"pattern-color":"#BDBDBD"}),(0,l.Lk)("div",N,[(0,l.RG)(e.$slots,"default")])]))}},C=X,L=C;var E=a(439),S=a(2914),U=a(3800),W=a(8524),P=a(5768);const z={class:"text-h6"},T={class:"text-subtitle2"},K={class:"column"},B={class:"col text-overline"},O={class:"col"},j={__name:"DefInput",props:["id","data","position","type","events","selected","resizing","dragging","connectable","dimensions","isValidTargetPos","isValidSourcePos","parent","parentNodeId","zIndex","targetPosition","sourcePosition","label","dragHandle"],emits:["updateNodeInternals"],setup(e){const t=e,a=t.data.config,{updateNodeData:n}=(0,s.Id)(),d=(0,l.EW)({get:()=>t.data.name,set:e=>{n(t.id,{name:e})}}),u=[P.oQ,(0,S.J)(),W.bM],p=[P.oQ,(0,U.Pq)(),W.bM],c=(0,i.KR)({remainNumb:0,recNumb:0,sendNumb:0});return(0,l.sV)((()=>{r.A.get("/transflow/node/status?nodeId="+t.id).then((e=>{c.value=e.data}))})),(t,n)=>{const r=(0,l.g2)("q-card-section"),g=(0,l.g2)("q-space"),b=(0,l.g2)("q-input"),v=(0,l.g2)("q-popup-edit"),k=(0,l.g2)("q-btn"),m=(0,l.g2)("q-separator"),f=(0,l.g2)("q-item"),y=(0,l.g2)("q-list"),F=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(F,{class:"my-node-card bg-secondary text-white"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{horizontal:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",z,(0,o.v_)(d.value),1),(0,l.Lk)("div",T,(0,o.v_)(e.data.pluginId),1)])),_:1}),(0,l.bF)(g),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(k,{dense:"",flat:"",icon:"edit"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),"auto-save":""},{default:(0,l.k6)((e=>[(0,l.bF)(b,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(m,{dark:""}),(0,l.bF)(y,{dense:"",padding:"",class:"full-width"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("剩余："+(0,o.v_)(c.value.remainNumb),1)])),_:1}),(0,l.bF)(f,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("接收："+(0,o.v_)(c.value.recNumb),1)])),_:1}),(0,l.bF)(f,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("发送："+(0,o.v_)(c.value.sendNumb),1)])),_:1})])),_:1}),(0,l.bF)(m,{dark:""}),(0,l.bF)(r,{class:"nodrag"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.data.properties,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.key},[(0,l.Lk)("div",K,[(0,l.Lk)("div",B,(0,o.v_)(e.key),1),(0,l.Lk)("div",O,["json"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:0,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[p]},null,8,["modelValue","onUpdate:modelValue","extensions"])):"code"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:1,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[u]},null,8,["modelValue","onUpdate:modelValue","extensions"])):((0,l.uX)(),(0,l.Wv)(b,{key:2,dark:"",modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,dense:"",borderless:"",square:"",standout:""},null,8,["modelValue","onUpdate:modelValue"]))])])])))),128))])),_:1})])),_:1}),(0,l.bF)((0,i.R1)(s.h7),{type:"source",position:(0,i.R1)(s.yX).Right},null,8,["position"])],64)}}};var M=a(5375),J=a(2860),H=a(6907),$=a(1763),Y=a(8830),G=a(7195),Z=a(1237);const ee=j,te=ee;D()(j,"components",{QCard:M.A,QCardSection:J.A,QSpace:H.A,QBtn:$.A,QPopupEdit:Y.A,QInput:G.A,QSeparator:Z.A,QList:_.A,QItem:V.A});var ae=a(5962);const le={class:"text-h6"},oe={class:"text-subtitle2"},ne={class:"column"},de={class:"col text-overline"},se={class:"col"},ue={class:"q-gutter-md"},ie={class:"q-ml-md"},re={__name:"DefFilter",props:["id","data","position","type","events","selected","resizing","dragging","connectable","dimensions","isValidTargetPos","isValidSourcePos","parent","parentNodeId","zIndex","targetPosition","sourcePosition","label","dragHandle"],emits:["updateNodeInternals"],setup(e){const t=e,a=t.data.config,n=t.data.handles,{updateNodeData:d}=(0,s.Id)(),u=(0,l.EW)({get:()=>t.data.name,set:e=>{d(t.id,{name:e})}}),p=[P.oQ,(0,S.J)(),W.bM],c=[P.oQ,(0,U.Pq)(),W.bM],g=(0,i.KR)({remainNumb:0,recNumb:0,sendNumb:0});return(0,l.sV)((()=>{r.A.get("/transflow/node/status?nodeId="+t.id).then((e=>{g.value=e.data}))})),(t,d)=>{const r=(0,l.g2)("q-card-section"),b=(0,l.g2)("q-space"),v=(0,l.g2)("q-input"),k=(0,l.g2)("q-popup-edit"),m=(0,l.g2)("q-btn"),f=(0,l.g2)("q-separator"),y=(0,l.g2)("q-item"),F=(0,l.g2)("q-list"),h=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(h,{class:"my-node-card bg-positive text-white"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{horizontal:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",le,(0,o.v_)(u.value),1),(0,l.Lk)("div",oe,(0,o.v_)(e.data.pluginId),1)])),_:1}),(0,l.bF)(b),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(m,{dense:"",flat:"",icon:"edit"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=e=>u.value=e),"auto-save":""},{default:(0,l.k6)((e=>[(0,l.bF)(v,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(f,{dark:""}),(0,l.bF)(F,{dense:"",padding:"",class:"full-width"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("剩余："+(0,o.v_)(g.value.remainNumb),1)])),_:1}),(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("接收："+(0,o.v_)(g.value.recNumb),1)])),_:1}),(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("发送："+(0,o.v_)(g.value.sendNumb),1)])),_:1})])),_:1}),(0,l.bF)(f,{dark:""}),e.data.properties.length>0?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"nodrag"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.data.properties,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.key},[(0,l.Lk)("div",ne,[(0,l.Lk)("div",de,(0,o.v_)(e.key),1),(0,l.Lk)("div",se,["json"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:0,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[c]},null,8,["modelValue","onUpdate:modelValue","extensions"])):"code"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:1,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[p]},null,8,["modelValue","onUpdate:modelValue","extensions"])):((0,l.uX)(),(0,l.Wv)(v,{key:2,dark:"",modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,dense:"",borderless:"",square:"",standout:""},null,8,["modelValue","onUpdate:modelValue"]))])])])))),128))])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(r,{class:"nodrag"},{default:(0,l.k6)((()=>[d[2]||(d[2]=(0,l.Lk)("div",{class:"col text-overline"},"handle",-1)),(0,l.Lk)("div",ue,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(n),((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t},[(0,l.bF)(v,{modelValue:(0,i.R1)(n)[t].value,"onUpdate:modelValue":e=>(0,i.R1)(n)[t].value=e,dark:"",dense:"",borderless:"",square:"",standout:""},{prepend:(0,l.k6)((()=>[(0,l.bF)((0,i.R1)(s.h7),{id:(0,i.R1)(n)[t].id,type:"target",position:(0,i.R1)(s.yX).Left},null,8,["id","position"])])),append:(0,l.k6)((()=>[(0,l.bF)((0,i.R1)(s.h7),{id:(0,i.R1)(n)[t].id,type:"source",position:(0,i.R1)(s.yX).Right},null,8,["id","position"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128)),(0,l.Lk)("div",ie,[(0,l.bF)(m,{dense:"",class:"full-width",flat:"",label:"+",onClick:d[1]||(d[1]=e=>(0,i.R1)(n).push({id:(0,i.R1)(ae.Ak)(),value:""}))})])])])),_:1})])),_:1}),0===(0,i.R1)(n).length?((0,l.uX)(),(0,l.Wv)((0,i.R1)(s.h7),{key:0,type:"target",position:(0,i.R1)(s.yX).Left},null,8,["position"])):(0,l.Q3)("",!0),0===(0,i.R1)(n).length?((0,l.uX)(),(0,l.Wv)((0,i.R1)(s.h7),{key:1,type:"source",position:(0,i.R1)(s.yX).Right},null,8,["position"])):(0,l.Q3)("",!0)],64)}}},pe=re,ce=pe;D()(re,"components",{QCard:M.A,QCardSection:J.A,QSpace:H.A,QBtn:$.A,QPopupEdit:Y.A,QInput:G.A,QSeparator:Z.A,QList:_.A,QItem:V.A});const ge={class:"text-h6"},be={class:"text-subtitle2"},ve={class:"column"},ke={class:"col text-overline"},me={class:"col"},fe={class:"q-gutter-md"},ye={class:"q-ml-md"},Fe={__name:"DefOutput",props:["id","data","position","type","events","selected","resizing","dragging","connectable","dimensions","isValidTargetPos","isValidSourcePos","parent","parentNodeId","zIndex","targetPosition","sourcePosition","label","dragHandle"],emits:["updateNodeInternals"],setup(e){const t=e,a=t.data.config,n=t.data.handles,{updateNodeData:d}=(0,s.Id)(),u=(0,l.EW)({get:()=>t.data.name,set:e=>{d(t.id,{name:e})}}),p=[P.oQ,(0,S.J)(),W.bM],c=[P.oQ,(0,U.Pq)(),W.bM],g=(0,i.KR)({remainNumb:0,recNumb:0,sendNumb:0});return(0,l.sV)((()=>{r.A.get("/transflow/node/status?nodeId="+t.id).then((e=>{g.value=e.data}))})),(t,d)=>{const r=(0,l.g2)("q-card-section"),b=(0,l.g2)("q-space"),v=(0,l.g2)("q-input"),k=(0,l.g2)("q-popup-edit"),m=(0,l.g2)("q-btn"),f=(0,l.g2)("q-separator"),y=(0,l.g2)("q-item"),F=(0,l.g2)("q-list"),h=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(h,{class:"my-node-card bg-primary text-white"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{horizontal:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",ge,(0,o.v_)(u.value),1),(0,l.Lk)("div",be,(0,o.v_)(e.data.pluginId),1)])),_:1}),(0,l.bF)(b),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(m,{dense:"",flat:"",icon:"edit"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=e=>u.value=e),"auto-save":""},{default:(0,l.k6)((e=>[(0,l.bF)(v,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(f,{dark:""}),(0,l.bF)(F,{dense:"",padding:"",class:"full-width"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("剩余："+(0,o.v_)(g.value.remainNumb),1)])),_:1}),(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("接收："+(0,o.v_)(g.value.recNumb),1)])),_:1}),(0,l.bF)(y,{class:"text-subtitle2",clickable:""},{default:(0,l.k6)((()=>[(0,l.eW)("发送："+(0,o.v_)(g.value.sendNumb),1)])),_:1})])),_:1}),(0,l.bF)(f,{dark:""}),e.data.properties.length>0?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"nodrag"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.data.properties,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.key},[(0,l.Lk)("div",ve,[(0,l.Lk)("div",ke,(0,o.v_)(e.key),1),(0,l.Lk)("div",me,["json"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:0,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[c]},null,8,["modelValue","onUpdate:modelValue","extensions"])):"code"===e.type?((0,l.uX)(),(0,l.Wv)((0,i.R1)(E.Ay),{key:1,modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,wrap:!0,tabSize:4,extensions:[p]},null,8,["modelValue","onUpdate:modelValue","extensions"])):((0,l.uX)(),(0,l.Wv)(v,{key:2,dark:"",modelValue:(0,i.R1)(a)[e.key],"onUpdate:modelValue":t=>(0,i.R1)(a)[e.key]=t,dense:"",borderless:"",square:"",standout:""},null,8,["modelValue","onUpdate:modelValue"]))])])])))),128))])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(r,{class:"nodrag"},{default:(0,l.k6)((()=>[d[2]||(d[2]=(0,l.Lk)("div",{class:"col text-overline"},"handle",-1)),(0,l.Lk)("div",fe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(n),((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t},[(0,l.bF)(v,{modelValue:(0,i.R1)(n)[t].value,"onUpdate:modelValue":e=>(0,i.R1)(n)[t].value=e,dark:"",dense:"",borderless:"",square:"",standout:""},{prepend:(0,l.k6)((()=>[(0,l.bF)((0,i.R1)(s.h7),{id:(0,i.R1)(n)[t].id,type:"target",position:(0,i.R1)(s.yX).Left},null,8,["id","position"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128)),(0,l.Lk)("div",ye,[(0,l.bF)(m,{dense:"",class:"full-width",flat:"",label:"+",onClick:d[1]||(d[1]=e=>(0,i.R1)(n).push({id:(0,i.R1)(ae.Ak)(),value:""}))})])])])),_:1})])),_:1}),0===(0,i.R1)(n).length?((0,l.uX)(),(0,l.Wv)((0,i.R1)(s.h7),{key:0,type:"target",position:(0,i.R1)(s.yX).Left},null,8,["position"])):(0,l.Q3)("",!0)],64)}}},he=Fe,_e=he;D()(Fe,"components",{QCard:M.A,QCardSection:J.A,QSpace:H.A,QBtn:$.A,QPopupEdit:Y.A,QInput:G.A,QSeparator:Z.A,QList:_.A,QItem:V.A});const Ve={components:{Panel:s.Zk,DefOutput:_e,DefFilter:ce,DefInput:te,DropzoneBackground:L,SideBar:w,MiniMap:u.of,VueFlow:s.nO,SpecialEdge:f},props:["jobId"],setup(){const{onConnect:e,addEdges:t,setNodes:a,setEdges:l,onNodeDragStop:o,onNodesChange:n,onEdgesChange:d,applyNodeChanges:u,findNode:i}=(0,s.Id)(),{onDragOver:p,onDrop:c,onDragLeave:g,isDragOver:v}=b();return e((e=>{console.log("newEdge",e),r.A.post("/transflow/node/link",{sourceId:e.source,targetId:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}).then((e=>{t({...e.data})}))})),o((async e=>{for(const t of e.nodes)r.A.post("/transflow/node/save",{...t})})),n((async e=>{for(const t of e)if(console.log("change.type",t.type,t),"remove"===t.type&&await r.A.post("/transflow/node/delete",{id:t.id}),"select"===t.type&&!t.selected){const e=i(t.id);r.A.post("/transflow/node/save",{...e})}d((async e=>{for(const t of e)"remove"===t.type&&await r.A.post("/transflow/node/unlink",{id:t.id})})),u(e)})),{onDragOver:p,onDrop:c,onDragLeave:g,isDragOver:v,setNodes:a,setEdges:l}},methods:{reloadData(e){this.$axios.get("/transflow/node/allForDraw?jobId="+e).then((e=>{this.setNodes(e.data.nodes),this.setEdges(e.data.edges)}))},runJob(){this.$axios.post("/transflow/job/run",{id:this.jobId})},stopJob(){this.$axios.post("/transflow/job/stop",{id:this.jobId})},buildJob(){this.$axios.post("/transflow/job/build",{id:this.jobId})}},beforeMount(){console.log("beforeMount")},watch:{jobId:{handler(e){console.log(e),this.reloadData(e)},immediate:!0}}};var Re=a(2859),qe=a(1355),Ae=a(2477),De=a(4588),Ie=a(7223),we=a(5618);const xe=(0,h.A)(Ve,[["render",d]]),Qe=xe;D()(Ve,"components",{QLayout:Re.A,QDrawer:qe.A,QScrollArea:Ae.A,QPageContainer:De.A,QPage:Ie.A,QBtnGroup:we.A,QBtn:$.A})}}]);